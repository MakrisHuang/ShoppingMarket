CREATE DATABASE ShoppingMarket DEFAULT CHARACTER SET 'utf8'
  DEFAULT COLLATE 'utf8_unicode_ci';

USE ShoppingMarket;

CREATE TABLE UserPrincipal (
  UserId BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  Username VARCHAR(30) NOT NULL,
  HashedPassword BINARY(60) NOT NULL,
  UNIQUE KEY UserPrincipal_Username (Username)
) ENGINE = InnoDB;

CREATE TABLE Orders(
  OrderId BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  Price INTEGER UNSIGNED NOT NULL,
  UserId BIGINT UNSIGNED NOT NULL,
  Status TEXT,
  DateCreated TIMESTAMP(6) NULL,
  CONSTRAINT Order_UserId FOREIGN KEY (UserId)
    REFERENCES UserPrincipal (UserId) ON DELETE CASCADE
) ENGINE = InnoDB;

CREATE TABLE ShoppingItem (
  ShoppingItemId BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  Name VARCHAR(255) NOT NULL,
  Category VARCHAR(255) NOT NULL,
  Description TEXT,
  Price DOUBLE UNSIGNED NOT NULL,
  DateCreated TIMESTAMP(6) NULL,
  Image BLOB NULL
) ENGINE = InnoDB;